<!DOCTYPE html>
<html lang="en">
<head>
  <script src="./component.js"></script>
</head>
<body>
<script>
    customElements.define('our-custom-element',
        class extends HTMLElement {
            constructor() {
            super();
            var style = document.createElement('style');
            var div = document.createElement('div');
            div.innerHTML = `<web-component jwt="123"></web-component>`;
            var template = document.getElementById('#forCustom');
            const shadowRoot = this.attachShadow({mode: 'open'});
            shadowRoot.appendChild(style);
            shadowRoot.appendChild(div);
            shadowRoot.querySelector("web-component").addEventListener('notify', (e) => {
            console.log(`Notified from element definition : ${JSON.stringify(e)}`);
            })
            }
        }
    );
</script>
<script>
    window.onload = () => {
        const shadowRoot = document.querySelector("our-custom-element").shadowRoot;
        const element = shadowRoot.querySelector("web-component");
        console.log(element);
        element.addEventListener('notify', (e) => {
            console.log(`Notified from outside query : ${JSON.stringify(e)}`);
        })
    };
</script>
<our-custom-element></our-custom-element>
</body>
</html>
